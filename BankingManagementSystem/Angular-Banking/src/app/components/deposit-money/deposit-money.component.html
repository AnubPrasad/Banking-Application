<div class="page-container">
  <h1>Deposit Money</h1>
  
  <div class="deposit-container">
    <form [formGroup]="depositForm" (ngSubmit)="onSubmit()">
      <!-- Account Number Fields -->
      <div class="form-group">
        <label>Account Number</label>
        <input type="text" formControlName="accountNumber" [class.invalid]="depositForm.hasError('mismatch')">
        <div *ngIf="depositForm.get('accountNumber')?.hasError('required') && depositForm.get('accountNumber')?.touched" 
             class="error-message">
          Account number is required
        </div>
        <div *ngIf="depositForm.get('accountNumber')?.hasError('pattern')" class="error-message">
          Account number must be numeric
        </div>
      </div>

      <div class="form-group">
        <label>Confirm Account Number</label>
        <input type="text" formControlName="confirmAccountNumber" [class.invalid]="depositForm.hasError('mismatch')">
        <div *ngIf="depositForm.hasError('mismatch')" class="error-message">
          Account numbers don't match
        </div>
      </div>

      <button type="button" (click)="verifyAccount()" 
              [disabled]="!depositForm.get('accountNumber')?.valid || 
                         !depositForm.get('confirmAccountNumber')?.valid ||
                         depositForm.hasError('mismatch')">
        <span *ngIf="!isLoading">Verify Account</span>
        <span *ngIf="isLoading">Verifying...</span>
      </button>

      <!-- Account Verification Info -->
      <div *ngIf="accountVerified" class="account-info">
        <h3>Account Verified</h3>
        <p><strong>Account Holder:</strong> {{ accountHolderName }}</p>
        <p><strong>Current Balance:</strong> {{ currentBalance | currency }}</p>
      </div>

      <!-- Amount Field -->
      <div class="form-group" *ngIf="accountVerified">
        <label>Deposit Amount</label>
        <input type="number" step="0.01" formControlName="amount">
        <div *ngIf="depositForm.get('amount')?.hasError('required') && depositForm.get('amount')?.touched" 
             class="error-message">
          Amount is required
        </div>
        <div *ngIf="depositForm.get('amount')?.hasError('min')" class="error-message">
          Minimum deposit is $0.01
        </div>
        <div *ngIf="depositForm.get('amount')?.hasError('max')" class="error-message">
          Maximum deposit is $100,000
        </div>
      </div>

      <!-- Submit Button -->
      <button type="submit" *ngIf="accountVerified" 
              [disabled]="!depositForm.valid || isLoading" class="submit-button">
        <span *ngIf="!isLoading">Submit Deposit</span>
        <span *ngIf="isLoading">Processing...</span>
      </button>
    </form>
  </div>
</div>